<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
 <!--<link href="./src/output.css" rel="stylesheet" />-->
    <link
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"
      rel="stylesheet"
    />
    <!--<link href="./styles.css" rel="stylesheet" />-->

    <title>FrenchWordle</title>
    <style>
      .game-container {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 2rem;
      }
      .cell {
        width: 50px;
        height: 50px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1.5rem;
        font-weight: bold;
      }
      #game-board {
        display: grid;
        grid-template-columns: repeat(5, 1fr);
        gap: 0.5rem;
        margin-bottom: 2rem;
      }
    </style>
  </head>

  <body class="bg-green-100">
    <div class="w-full h-full flex items-center justify-center">
      <div
        class="border-4 border-blue-500 p-10 rounded-lg max-w-xl mx-auto bg-white"
      >
        <header class="text-center">
          <h1 class="text-3xl font-bold text-blue-600 mb-8">FrenchWordle</h1>
        </header>

        <div class="game-container">
          <div id="game-board"></div>
          <!-- Tableau des cellules -->

         <div class="grid grid-cols-5 gap-2 mb-6" id="game-board">

            <!-- Les cellules seront générées dynamiquement par JavaScript -->
          </div>
        </div>

     
        <!-- Clavier -->
        <div class="grid grid-cols-5 gap-2 justify-center">
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            A
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            B
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            C
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            D
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            E
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            F
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            G
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            H
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            I
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            J
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            K
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            L
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            M
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            N
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            O
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            P
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            Q
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            R
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            S
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            T
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            U
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            V
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            W
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            X
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            Y
          </button>
          <button class="key bg-gray-300 hover:bg-gray-400 p-2 rounded">
            Z
          </button>
          <button
            class="key bg-gray-300 hover:bg-gray-400 p-2 rounded col-span-2"
            id="enter-key"
          >
            enter
          </button>
          <button
            class="key bg-gray-300 hover:bg-gray-400 p-2 rounded col-span-2"
            id="delete-key"
          >
            delete
          </button>
        </div>
      </div>
    </div>
    <script>
      var listeMots = [
        "avion",
        "belle",
        "chien",
        "droit",
        "eclat",
        "forme",
        "givre",
        "havre",
        "ideal",
        "jouer",
        "lourd",
        "mains",
        "noyer",
        "ombre",
        "porte",
        "quite",
        "rouge",
        "sable",
        "table",
        "usure",
        "vivre",
        "wagon",
        "zebre",
      ];
      var motCorrect;
      var ligneActuelle = 0;
      var colonneActuelle = 0;

      // Fonction pour choisir un mot aléatoire parmi la liste de mots
      function choisirMotAleatoire() {
        return listeMots[Math.floor(Math.random() * listeMots.length)];
      }

      function genererGrille() {
        const gameBoard = document.getElementById("game-board");
        gameBoard.innerHTML = "";
        for (let i = 0; i < 6; i++) {
          for (let j = 0; j < 5; j++) {
            const cell = document.createElement("div");
            cell.classList.add("cell", "border", "border-gray-300", "rounded");
            gameBoard.appendChild(cell);
          }
        }
      }
      // Fonction pour mettre à jour la cellule avec le caractère choisi
      function updateCell(character) {
        if (colonneActuelle < 5) {
          const cellIndex = ligneActuelle * 5 + colonneActuelle;
          const cells = document.querySelectorAll(".cell");
          cells[cellIndex].textContent = character;
          colonneActuelle++;
        }
      }

      function effacerCaractere() {
        if (colonneActuelle > 0) {
          colonneActuelle--;
          const cellIndex = ligneActuelle * 5 + colonneActuelle;
          const cells = document.querySelectorAll(".cell");
          cells[cellIndex].textContent = "";
        }
      }

      function verifierMot() {
        const cells = document.querySelectorAll(".cell");
        const rowCells = Array.from(cells).slice(
          ligneActuelle * 5,
          (ligneActuelle + 1) * 5
        );
        let mot = rowCells
          .map(cell => cell.textContent.toLowerCase())
          .join("");

        if (mot.length === 5) {
          for (let i = 0; i < 5; i++) {
            if (mot[i] === motCorrect[i]) {
              rowCells[i].style.backgroundColor = "green";
            } else if (motCorrect.includes(mot[i])) {
              rowCells[i].style.backgroundColor = "yellow";
            } else {
              rowCells[i].style.backgroundColor = "gray";
            }
          }
          if (mot === motCorrect) {
            alert("Bravo ! vous avez trouvé le mot");
          } else if (ligneActuelle === 5) {
            alert("Dommage . Le mot était: " + motCorrect);
          } else {
            ligneActuelle++;
            colonneActuelle = 0;
          }
        }
      }

      function handleVirtualKeyboardClick(letter){
        if (letter === "enter"){
          verifierMot();
        }else if (letter === "delete"){
          effacerCaractere();
        }else if (letter.length === 1 && letter >= "a" && letter <= "z"){
          updateCell(letter.toUpperCase());
        }
      } 

      // Appel de la fonction au chargement de la page
      window.onload = function () {
        motCorrect = choisirMotAleatoire();
        genererGrille();
        console.log("Mot correct choisi :", motCorrect);

        document.querySelectorAll(".key").forEach((key) => {
          key.addEventListener("click", (event) => {
            event.preventDefault();
            const letter = key.textContent.trim().toLowerCase();
            handleVirtualKeyboardClick(letter);
          });
        });
           // if (letter === "enter") {
           //   verifierMot();
           // } else if (letter === "delete") {
           //   effacerCaractere();
           // } else if (letter.length === 1 && letter >= "a" && letter <= "z") {
           //   updateCell(letter.toUpperCase);
           // }
          

        // Gestion des événements du clavier physique
  document.addEventListener("keydown", (event) => {
    if (event.key === "Enter") {
      verifierMot();
    } else if (event.key === "Backspace") {
      effacerCaractere();
    } else if (event.key.length === 1 && event.key.match(/[a-z]/i)) {
      updateCell(event.key.toUpperCase());
    }
  });
      };
    </script>
  </body>
</html>
